var Utils={champions:undefined,maps:undefined,modes:undefined,queues:undefined,gamesCodex:undefined,summoners:undefined,items:undefined,Setup:function(){Utils.champions=Riot.DDragon.models.champion.remapKeys;Utils.maps=Codex.common.binding.Map.maps;Utils.modes=Codex.common.binding.Mode.modes;Utils.queues=Codex.common.binding.Queue.queues;Utils.gamesCodex=Ramen.getCollection("Games");Utils.summoners=Riot.DDragon.models.summoner.remapKeys;Utils.items=Riot.DDragon.models.item.data},GetSummonerSpellName:function(n){return Riot.DDragon.models.summoner.data[Utils.summoners[n]].name},GetVersion:function(n){return DragonRamen.getVersion(n)},GetItemName:function(n,t){return n===0?"_":DragonRamen.get("item",t,n).attributes.name}},KM={main:undefined,menu:undefined,header:undefined,result:undefined,inspect:undefined,icons:undefined,Setup:function(){KM.main=document.createElement("div");KM.main.setAttribute("style","color: white; margin: 5px;");KM.menu=document.createElement("div");KM.menu.props={};KM.menu.props.Remover=document.createElement("input");KM.menu.props.Remover.setAttribute("type","button");KM.menu.props.Remover.setAttribute("value","Remover tudo");KM.menu.props.Remover.addEventListener("click",km.DestroySelf);KM.menu.appendChild(KM.menu.props.Remover);KM.menu.props.Partidas=document.createElement("input");KM.menu.props.Partidas.setAttribute("type","button");KM.menu.props.Partidas.setAttribute("value","Pegar partidas");KM.menu.props.Partidas.addEventListener("click",km.GetGames);KM.menu.appendChild(KM.menu.props.Partidas);KM.menu.props.Crescente=document.createElement("input");KM.menu.props.Crescente.setAttribute("type","button");KM.menu.props.Crescente.setAttribute("value","Mostrar em ordem crescente");KM.menu.props.Crescente.addEventListener("click",km.ShowAsc);KM.menu.appendChild(KM.menu.props.Crescente);KM.menu.props.Decrescente=document.createElement("input");KM.menu.props.Decrescente.setAttribute("type","button");KM.menu.props.Decrescente.setAttribute("value","Mostrar em ordem decrescente");KM.menu.props.Decrescente.addEventListener("click",km.ShowDesc);KM.menu.appendChild(KM.menu.props.Decrescente);KM.main.appendChild(KM.menu);KM.header=document.createElement("div");KM.header.props={};KM.header.props.Partidas=document.createElement("div");KM.header.props.Partidas.innerHTML="Partidas encontradas/total: 0/"+Utils.gamesCodex.pager.total;KM.header.appendChild(KM.header.props.Partidas);KM.header.props.Titulo=document.createElement("div");KM.header.props.Titulo.innerHTML=" ";KM.header.appendChild(KM.header.props.Titulo);KM.main.appendChild(KM.header);KM.result=document.createElement("div");KM.main.appendChild(KM.result);KM.inspect=document.createElement("div");KM.inspect.setAttribute("style","z-index: 9999999; position: fixed; background-color: rgba(0, 0, 0, 0.667);");KM.inspect.props={};KM.icons=document.createElement("div");KM.icons.props={};KM.icons.props.Campeao=document.createElement("img");KM.icons.props.Campeao.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Campeao);KM.icons.props.Summoner1=document.createElement("img");KM.icons.props.Summoner1.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Summoner1);KM.icons.props.Summoner2=document.createElement("img");KM.icons.props.Summoner2.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Summoner2);KM.icons.props.Item0=document.createElement("img");KM.icons.props.Item0.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item0);KM.icons.props.Item1=document.createElement("img");KM.icons.props.Item1.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item1);KM.icons.props.Item2=document.createElement("img");KM.icons.props.Item2.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item2);KM.icons.props.Item3=document.createElement("img");KM.icons.props.Item3.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item3);KM.icons.props.Item4=document.createElement("img");KM.icons.props.Item4.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item4);KM.icons.props.Item5=document.createElement("img");KM.icons.props.Item5.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item5);KM.icons.props.Item6=document.createElement("img");KM.icons.props.Item6.setAttribute("width","64");KM.icons.appendChild(KM.icons.props.Item6);KM.inspect.appendChild(KM.icons);KM.inspect.props.Campeao=document.createElement("div");KM.inspect.props.Campeao.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Campeao);KM.inspect.props.Level=document.createElement("div");KM.inspect.props.Level.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Level);KM.inspect.props.Lane=document.createElement("div");KM.inspect.props.Lane.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Lane);KM.inspect.props.Summoner=document.createElement("div");KM.inspect.props.Summoner.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Summoner);KM.inspect.props.Items=document.createElement("div");KM.inspect.props.Items.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Items);KM.inspect.props.Ouro=document.createElement("div");KM.inspect.props.Ouro.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Ouro);KM.inspect.props.KDA=document.createElement("div");KM.inspect.props.KDA.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.KDA);KM.inspect.props.Minions=document.createElement("div");KM.inspect.props.Minions.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Minions);KM.inspect.props.Mapa=document.createElement("div");KM.inspect.props.Mapa.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Mapa);KM.inspect.props.Modo=document.createElement("div");KM.inspect.props.Modo.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Modo);KM.inspect.props.Fila=document.createElement("div");KM.inspect.props.Fila.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Fila);KM.inspect.props.Duracao=document.createElement("div");KM.inspect.props.Duracao.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Duracao);KM.inspect.props.Criacao=document.createElement("div");KM.inspect.props.Criacao.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Criacao);KM.inspect.props.Patch=document.createElement("div");KM.inspect.props.Patch.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Patch);KM.inspect.props.Nome=document.createElement("div");KM.inspect.props.Nome.innerHTML=" ";KM.inspect.appendChild(KM.inspect.props.Nome);KM.main.appendChild(KM.inspect);$("body").prepend(KM.main)},UpdateResult:function(n,t){KM.header.props.Titulo.innerHTML=n;KM.result.innerHTML=t},UpdatePartidas:function(n,t){KM.header.props.Partidas.innerHTML="Partidas encontradas/total: "+n+"/"+t},UpdateInspect:function(n){KM.icons.style.backgroundColor=n.stats.win?"rgba(0, 255, 0, 0.25)":"rgba(255, 0, 0, 0.25)";KM.inspect.props.Campeao.innerHTML="Campeão: "+n.championName;KM.inspect.props.Level.innerHTML="Level: "+n.stats.champLevel;KM.inspect.props.Lane.innerHTML="Lane: "+(n.timeline.role==="NONE"?"":n.timeline.role)+" "+n.timeline.lane;KM.inspect.props.Summoner.innerHTML="Summoners: "+n.spells[0]+" & "+n.spells[1];KM.inspect.props.Items.innerHTML="Items: "+n.items[0]+" & "+n.items[1]+" & "+n.items[2]+" & "+n.items[3]+" & "+n.items[4]+" & "+n.items[5]+" & "+n.items[6];KM.inspect.props.Ouro.innerHTML="Ouro gasto/ouro recebido: "+n.stats.goldSpent+"/"+n.stats.goldEarned;KM.inspect.props.KDA.innerHTML="K/D/A: "+n.stats.kills+"/"+n.stats.deaths+"/"+n.stats.assists;KM.inspect.props.Minions.innerHTML="Minions + Neutros: "+n.stats.totalMinionsKilled+" + "+n.stats.neutralMinionsKilled+" = "+(n.stats.totalMinionsKilled+n.stats.neutralMinionsKilled);KM.inspect.props.Mapa.innerHTML="Mapa: "+n.mapName;KM.inspect.props.Modo.innerHTML="Modo: "+n.modeName;KM.inspect.props.Fila.innerHTML="Fila: "+n.queueName;KM.inspect.props.Duracao.innerHTML="Duração: "+n.gameDurationString;KM.inspect.props.Criacao.innerHTML="Data de criação: "+n.gameCreationString;KM.inspect.props.Patch.innerHTML="Patch: "+n.gameVersion;KM.inspect.props.Nome.innerHTML="Nome: "+n.player.summonerName},UpdateIcons:function(n){KM.icons.props.Campeao.setAttribute("src",n.champion);KM.icons.props.Summoner1.setAttribute("src",n.spells[0]);KM.icons.props.Summoner2.setAttribute("src",n.spells[1]);KM.icons.props.Item0.setAttribute("src",n.items[0]);KM.icons.props.Item1.setAttribute("src",n.items[1]);KM.icons.props.Item2.setAttribute("src",n.items[2]);KM.icons.props.Item3.setAttribute("src",n.items[3]);KM.icons.props.Item4.setAttribute("src",n.items[4]);KM.icons.props.Item5.setAttribute("src",n.items[5]);KM.icons.props.Item6.setAttribute("src",n.items[6])},SetButtonsState:function(n,t,i){KM.menu.props.Partidas.disabled=n;KM.menu.props.Crescente.disabled=t;KM.menu.props.Decrescente.disabled=i},DestroySelf:function(){KM.main&&document.body.removeChild(KM.main)}},km={games:undefined,ShowAsc:function(){var t;km.games.sort(function(n,t){return t.gameCreation-n.gameCreation});var n=undefined,i=undefined,r="";for(t=0;t<km.games.length;t++)i=km.games.length-t-1,n=km.games[i],r+='<a style="color: white;" href="#match-details/BR1/'+n.gameId+"/"+n.player.currentAccountId+'" onmouseover="km.SetInfo('+i+');" >'+n.championName[0]+"<\/a>";KM.UpdateResult("Crescente",r)},ShowDesc:function(){var t;km.games.sort(function(n,t){return t.gameCreation-n.gameCreation});var n=undefined,i=undefined,r="";for(t=0;t<km.games.length;t++)i=t,n=km.games[i],r+='<a style="color: white;" href="#match-details/BR1/'+n.gameId+"/"+n.player.currentAccountId+'" onmouseover="km.SetInfo('+i+');" >'+n.championName[0]+"<\/a>";KM.UpdateResult("Decrescente",r)},Attach:function(){return Utils.Setup(),KM.Setup(),KM.SetButtonsState(!1,!0,!0),!0},DestroySelf:function(){KM.DestroySelf();Utils=undefined;KM=undefined;km=undefined},GetGames:function(){var n;km.games=[];KM.SetButtonsState(!0,!0,!0);var t=Codex.getContextUser(),r=t.get("region"),u=t.get("id");for(n=0;n<Math.ceil(Utils.gamesCodex.pager.total/20);n++){var i=n*20,f=i+20,e="?begIndex="+i+"&endIndex="+f+"&"+Utils.gamesCodex.getFilters(),o=Codex.util.ACS.getPlayerHistory(r,u,e);Codex.util.ACS.makeRequest({url:o,listeners:{load:km.onHistoryLoad,error:km.onPromiseError,scope:km}})}},onHistoryLoad:function(n,t){for(var i=0;i<t.games.games.length;i++)t.games.games[i]=km.ProcessGame(t.games.games[i]);km.games=km.games.concat(t.games.games);KM.SetButtonsState(!1,!1,!1);KM.UpdatePartidas(km.games.length,Utils.gamesCodex.pager.total)},onPromiseError:function(){KM.SetButtonsState(!1,!0,!0)},SetInfo:function(n){KM.UpdateInspect(km.games[n]);KM.UpdateIcons(km.games[n].img)},ProcessGame:function(n){n.championName=Utils.champions[n.participants[0].championId];n.gameVersion2=Utils.GetVersion(n.gameVersion);n.stats=n.participants[0].stats;n.timeline=n.participants[0].timeline;n.player=n.participantIdentities[0].player;n.mapName=Utils.maps[n.mapId];n.modeName=Utils.modes[n.gameMode];n.queueName=Utils.queues[n.queueId];n.gameDurationString=Math.floor(n.gameDuration/60)+":"+(n.gameDuration-Math.floor(n.gameDuration/60)*60);n.gameCreationString=new Date(n.gameCreation).toLocaleString();n.spells=[Utils.GetSummonerSpellName(n.participants[0].spell1Id),Utils.GetSummonerSpellName(n.participants[0].spell2Id)];n.items=[n.stats.item0,n.stats.item1,n.stats.item2,n.stats.item3,n.stats.item4,n.stats.item5,n.stats.item6];n.img={champion:"http://ddragon.leagueoflegends.com/cdn/"+n.gameVersion2+"/img/champion/"+n.championName+".png",items:[],spells:["http://ddragon.leagueoflegends.com/cdn/"+n.gameVersion2+"/img/spell/"+Utils.summoners[n.participants[0].spell1Id]+".png","http://ddragon.leagueoflegends.com/cdn/"+n.gameVersion2+"/img/spell/"+Utils.summoners[n.participants[0].spell2Id]+".png"]};for(var t=0;t<7;t++)n.img.items[t]=n.items[t]===0?"http://ddragon.leagueoflegends.com/cdn/"+n.gameVersion2+"/img/champion/"+n.championName+".png":"http://ddragon.leagueoflegends.com/cdn/"+n.gameVersion2+"/img/item/"+n.items[t]+".png",n.items[t]=Utils.GetItemName(n.items[t],n.gameVersion);return n}};km.Attach();