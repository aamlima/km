var Utils={champions:void 0,maps:void 0,modes:void 0,queues:void 0,gamesCodex:void 0,summoners:void 0,items:void 0,Setup:function(){Utils.champions=Riot.DDragon.models.champion.remapKeys,Utils.maps=Codex.common.binding.Map.maps,Utils.modes=Codex.common.binding.Mode.modes,Utils.queues=Codex.common.binding.Queue.queues,Utils.gamesCodex=Ramen.getCollection("Games"),Utils.summoners=Riot.DDragon.models.summoner.remapKeys,Utils.items=Riot.DDragon.models.item.data},GetSummonerSpellName:function(e){return Riot.DDragon.models.summoner.data[Utils.summoners[e]].name},GetVersion:function(e){return DragonRamen.getVersion(e)},GetItemName:function(e,t){return 0===e?"_":DragonRamen.get("item",t,e).attributes.name}},KM={main:void 0,menu:void 0,header:void 0,result:void 0,inspect:void 0,icons:void 0,Setup:function(){KM.main=document.createElement("div"),KM.main.setAttribute("style","color: white; margin: 5px;"),KM.menu=document.createElement("div"),KM.menu.props={},KM.menu.props.Remover=document.createElement("input"),KM.menu.props.Remover.setAttribute("type","button"),KM.menu.props.Remover.setAttribute("value","Remover tudo"),KM.menu.props.Remover.addEventListener("click",km.DestroySelf),KM.menu.appendChild(KM.menu.props.Remover),KM.menu.props.Partidas=document.createElement("input"),KM.menu.props.Partidas.setAttribute("type","button"),KM.menu.props.Partidas.setAttribute("value","Pegar partidas"),KM.menu.props.Partidas.addEventListener("click",km.GetGames),KM.menu.appendChild(KM.menu.props.Partidas),KM.menu.props.Crescente=document.createElement("input"),KM.menu.props.Crescente.setAttribute("type","button"),KM.menu.props.Crescente.setAttribute("value","Mostrar em ordem crescente"),KM.menu.props.Crescente.addEventListener("click",km.ShowAsc),KM.menu.appendChild(KM.menu.props.Crescente),KM.menu.props.Decrescente=document.createElement("input"),KM.menu.props.Decrescente.setAttribute("type","button"),KM.menu.props.Decrescente.setAttribute("value","Mostrar em ordem decrescente"),KM.menu.props.Decrescente.addEventListener("click",km.ShowDesc),KM.menu.appendChild(KM.menu.props.Decrescente),KM.main.appendChild(KM.menu),KM.header=document.createElement("div"),KM.header.props={},KM.header.props.Partidas=document.createElement("div"),KM.header.props.Partidas.innerHTML="Partidas encontradas/total: 0/"+Utils.gamesCodex.pager.total,KM.header.appendChild(KM.header.props.Partidas),KM.header.props.Titulo=document.createElement("div"),KM.header.props.Titulo.innerHTML=" ",KM.header.appendChild(KM.header.props.Titulo),KM.main.appendChild(KM.header),KM.result=document.createElement("div"),KM.main.appendChild(KM.result),KM.inspect=document.createElement("div"),KM.inspect.setAttribute("style","z-index: 9999999; position: fixed; background-color: rgba(0, 0, 0, 0.667);"),KM.inspect.props={},KM.icons=document.createElement("div"),KM.icons.props={},KM.icons.props.Campeao=document.createElement("img"),KM.icons.props.Campeao.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Campeao),KM.icons.props.Summoner1=document.createElement("img"),KM.icons.props.Summoner1.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Summoner1),KM.icons.props.Summoner2=document.createElement("img"),KM.icons.props.Summoner2.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Summoner2),KM.icons.props.Item0=document.createElement("img"),KM.icons.props.Item0.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item0),KM.icons.props.Item1=document.createElement("img"),KM.icons.props.Item1.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item1),KM.icons.props.Item2=document.createElement("img"),KM.icons.props.Item2.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item2),KM.icons.props.Item3=document.createElement("img"),KM.icons.props.Item3.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item3),KM.icons.props.Item4=document.createElement("img"),KM.icons.props.Item4.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item4),KM.icons.props.Item5=document.createElement("img"),KM.icons.props.Item5.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item5),KM.icons.props.Item6=document.createElement("img"),KM.icons.props.Item6.setAttribute("width","64"),KM.icons.appendChild(KM.icons.props.Item6),KM.inspect.appendChild(KM.icons),KM.inspect.props.Campeao=document.createElement("div"),KM.inspect.props.Campeao.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Campeao),KM.inspect.props.Level=document.createElement("div"),KM.inspect.props.Level.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Level),KM.inspect.props.Lane=document.createElement("div"),KM.inspect.props.Lane.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Lane),KM.inspect.props.Summoner=document.createElement("div"),KM.inspect.props.Summoner.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Summoner),KM.inspect.props.Items=document.createElement("div"),KM.inspect.props.Items.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Items),KM.inspect.props.Ouro=document.createElement("div"),KM.inspect.props.Ouro.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Ouro),KM.inspect.props.KDA=document.createElement("div"),KM.inspect.props.KDA.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.KDA),KM.inspect.props.Minions=document.createElement("div"),KM.inspect.props.Minions.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Minions),KM.inspect.props.Mapa=document.createElement("div"),KM.inspect.props.Mapa.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Mapa),KM.inspect.props.Modo=document.createElement("div"),KM.inspect.props.Modo.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Modo),KM.inspect.props.Fila=document.createElement("div"),KM.inspect.props.Fila.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Fila),KM.inspect.props.Duracao=document.createElement("div"),KM.inspect.props.Duracao.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Duracao),KM.inspect.props.Criacao=document.createElement("div"),KM.inspect.props.Criacao.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Criacao),KM.inspect.props.Patch=document.createElement("div"),KM.inspect.props.Patch.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Patch),KM.inspect.props.Nome=document.createElement("div"),KM.inspect.props.Nome.innerHTML=" ",KM.inspect.appendChild(KM.inspect.props.Nome),KM.main.appendChild(KM.inspect),$("body").prepend(KM.main)},UpdateResult:function(e,t){KM.header.props.Titulo.innerHTML=e,KM.result.innerHTML=t},UpdatePartidas:function(e,t){KM.header.props.Partidas.innerHTML="Partidas encontradas/total: "+e+"/"+t},UpdateInspect:function(e){KM.icons.style.backgroundColor=e.stats.win?"rgba(0, 255, 0, 0.25)":"rgba(255, 0, 0, 0.25)",KM.inspect.props.Campeao.innerHTML="Campe?o: "+e.championName,KM.inspect.props.Level.innerHTML="Level: "+e.stats.champLevel,KM.inspect.props.Lane.innerHTML="Lane: "+("NONE"===e.timeline.role?"":e.timeline.role)+" "+e.timeline.lane,KM.inspect.props.Summoner.innerHTML="Summoners: "+e.spells[0]+" & "+e.spells[1],KM.inspect.props.Items.innerHTML="Items: "+e.items[0]+" & "+e.items[1]+" & "+e.items[2]+" & "+e.items[3]+" & "+e.items[4]+" & "+e.items[5]+" & "+e.items[6],KM.inspect.props.Ouro.innerHTML="Ouro gasto/ouro recebido: "+e.stats.goldSpent+"/"+e.stats.goldEarned,KM.inspect.props.KDA.innerHTML="K/D/A: "+e.stats.kills+"/"+e.stats.deaths+"/"+e.stats.assists,KM.inspect.props.Minions.innerHTML="Minions + Neutros: "+e.stats.totalMinionsKilled+" + "+e.stats.neutralMinionsKilled+" = "+(e.stats.totalMinionsKilled+e.stats.neutralMinionsKilled),KM.inspect.props.Mapa.innerHTML="Mapa: "+e.mapName,KM.inspect.props.Modo.innerHTML="Modo: "+e.modeName,KM.inspect.props.Fila.innerHTML="Fila: "+e.queueName,KM.inspect.props.Duracao.innerHTML="Dura??o: "+e.gameDurationString,KM.inspect.props.Criacao.innerHTML="Data de cria??o: "+e.gameCreationString,KM.inspect.props.Patch.innerHTML="Patch: "+e.gameVersion,KM.inspect.props.Nome.innerHTML="Nome: "+e.player.summonerName},UpdateIcons:function(e){KM.icons.props.Campeao.setAttribute("src",e.champion),KM.icons.props.Summoner1.setAttribute("src",e.spells[0]),KM.icons.props.Summoner2.setAttribute("src",e.spells[1]),KM.icons.props.Item0.setAttribute("src",e.items[0]),KM.icons.props.Item1.setAttribute("src",e.items[1]),KM.icons.props.Item2.setAttribute("src",e.items[2]),KM.icons.props.Item3.setAttribute("src",e.items[3]),KM.icons.props.Item4.setAttribute("src",e.items[4]),KM.icons.props.Item5.setAttribute("src",e.items[5]),KM.icons.props.Item6.setAttribute("src",e.items[6])},SetButtonsState:function(e,t,n){KM.menu.props.Partidas.disabled=e,KM.menu.props.Crescente.disabled=t,KM.menu.props.Decrescente.disabled=n},DestroySelf:function(){KM.main&&document.body.removeChild(KM.main)}},km={games:void 0,ShowAsc:function(){km.games.sort(function(e,t){return t.gameCreation-e.gameCreation});for(var e=void 0,t=void 0,n="",s=0;s<km.games.length;s++)t=km.games.length-s-1,e=km.games[t],n+='<a style="color: white;" href="#match-details/BR1/'+e.gameId+"/"+e.player.currentAccountId+'" onmouseover="km.SetInfo('+t+');" >'+e.championName[0]+"</a>";KM.UpdateResult("Crescente",n)},ShowDesc:function(){km.games.sort(function(e,t){return t.gameCreation-e.gameCreation});for(var e=void 0,t=void 0,n="",s=0;s<km.games.length;s++)t=s,e=km.games[t],n+='<a style="color: white;" href="#match-details/BR1/'+e.gameId+"/"+e.player.currentAccountId+'" onmouseover="km.SetInfo('+t+');" >'+e.championName[0]+"</a>";KM.UpdateResult("Decrescente",n)},Attach:function(){return Utils.Setup(),KM.Setup(),KM.SetButtonsState(!1,!0,!0),!0},DestroySelf:function(){KM.DestroySelf(),Utils=void 0,KM=void 0,km=void 0},GetGames:function(){km.games=[],KM.SetButtonsState(!0,!0,!0);for(var e=Codex.getContextUser(),t=e.get("region"),n=e.get("id"),s=0;s<Math.ceil(Utils.gamesCodex.pager.total/20);s++){var i=20*s,o=i+20,p="?begIndex="+i+"&endIndex="+o+"&"+Utils.gamesCodex.getFilters(),r=Codex.util.ACS.getPlayerHistory(t,n,p);Codex.util.ACS.makeRequest({url:r,listeners:{load:km.onHistoryLoad,error:km.onPromiseError,scope:km}})}},onHistoryLoad:function(e,t){for(var n=0;n<t.games.games.length;n++)t.games.games[n]=km.ProcessGame(t.games.games[n]);km.games=km.games.concat(t.games.games),KM.SetButtonsState(!1,!1,!1),KM.UpdatePartidas(km.games.length,Utils.gamesCodex.pager.total)},onPromiseError:function(){KM.SetButtonsState(!1,!0,!0)},SetInfo:function(e){KM.UpdateInspect(km.games[e]),KM.UpdateIcons(km.games[e].img)},ProcessGame:function(e){e.championName=Utils.champions[e.participants[0].championId],e.gameVersion2=Utils.GetVersion(e.gameVersion),e.stats=e.participants[0].stats,e.timeline=e.participants[0].timeline,e.player=e.participantIdentities[0].player,e.mapName=Utils.maps[e.mapId],e.modeName=Utils.modes[e.gameMode],e.queueName=Utils.queues[e.queueId],e.gameDurationString=Math.floor(e.gameDuration/60)+":"+(e.gameDuration-60*Math.floor(e.gameDuration/60)),e.gameCreationString=new Date(e.gameCreation).toLocaleString(),e.spells=[Utils.GetSummonerSpellName(e.participants[0].spell1Id),Utils.GetSummonerSpellName(e.participants[0].spell2Id)],e.items=[e.stats.item0,e.stats.item1,e.stats.item2,e.stats.item3,e.stats.item4,e.stats.item5,e.stats.item6],e.img={champion:"http://ddragon.leagueoflegends.com/cdn/"+e.gameVersion2+"/img/champion/"+e.championName+".png",items:[],spells:["http://ddragon.leagueoflegends.com/cdn/"+e.gameVersion2+"/img/spell/"+Utils.summoners[e.participants[0].spell1Id]+".png","http://ddragon.leagueoflegends.com/cdn/"+e.gameVersion2+"/img/spell/"+Utils.summoners[e.participants[0].spell2Id]+".png"]};for(var t=0;7>t;t++)e.img.items[t]=0===e.items[t]?"http://ddragon.leagueoflegends.com/cdn/"+e.gameVersion2+"/img/champion/"+e.championName+".png":"http://ddragon.leagueoflegends.com/cdn/"+e.gameVersion2+"/img/item/"+e.items[t]+".png",e.items[t]=Utils.GetItemName(e.items[t],e.gameVersion);return e}};km.Attach();